{% extends "base.html" %}
{% block title %}Chuy·ªÉn HOA/th∆∞·ªùng - Ngh·ªã Edition{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold text-blue-700 mb-4">üî§ Chuy·ªÉn HOA/th∆∞·ªùng</h1>
<form method="post" id="convert-form">
    <textarea name="input_text" id="input_text" rows="6" placeholder="Nh·∫≠p vƒÉn b·∫£n ·ªü ƒë√¢y..." class="w-full border rounded p-3 text-lg mb-4" oninput="updateConvert()">{{ text|e }}</textarea>
    <div class="flex items-center space-x-6 mb-4">
        <label class="flex items-center space-x-2">
            <input type="radio" name="convert_mode" value="upper" {% if mode == 'upper' %}checked{% endif %} onchange="updateConvert()">
            <span>Chuy·ªÉn th√†nh CH·ªÆ HOA</span>
        </label>
        <label class="flex items-center space-x-2">
            <input type="radio" name="convert_mode" value="lower" {% if mode == 'lower' %}checked{% endif %} onchange="updateConvert()">
            <span>Chuy·ªÉn th√†nh ch·ªØ th∆∞·ªùng</span>
        </label>
    </div>
</form>
<div>
    <label class="font-semibold mb-2 block">K·∫øt qu·∫£:</label>
    <textarea id="result_text" class="w-full border rounded p-3 text-lg bg-gray-50" rows="5" readonly>{{ result|e }}</textarea>
    <button type="button" onclick="copyResult()" class="mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold transition">üìã Copy k·∫øt qu·∫£</button>
</div>
<script>
function updateConvert() {
    let text = document.getElementById('input_text').value;
    let mode = document.querySelector('input[name="convert_mode"]:checked').value;
    fetch('/caseconvert', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: 'input_text=' + encodeURIComponent(text) + '&convert_mode=' + mode
    })
    .then(response => response.text())
    .then(html => {
        let parser = new DOMParser();
        let doc = parser.parseFromString(html, 'text/html');
        document.getElementById('result_text').value = doc.getElementById('result_text').value;
    });
}
function copyResult() {
    let result = document.getElementById('result_text');
    result.select();
    document.execCommand('copy');
    alert('ƒê√£ copy k·∫øt qu·∫£!');
}
window.onload = function(){ updateConvert(); };
</script>
{% endblock %}
