{% extends "base.html" %}
{% block title %}B·ªô ƒë·∫øm k√Ω t·ª± - Ngh·ªã Edition{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold text-blue-700 mb-4">üìù B·ªô ƒë·∫øm k√Ω t·ª± & ch·ªØ</h1>
<form method="post" id="charcount-form">
    <textarea id="input_text" name="input_text" rows="6" placeholder="Nh·∫≠p ho·∫∑c d√°n vƒÉn b·∫£n v√†o ƒë√¢y..." class="w-full border rounded p-3 text-lg mb-4" oninput="updateCount()" onpaste="setTimeout(updateCount,10)">{{ text|e }}</textarea>
    <div class="flex items-center space-x-6 mb-4">
        <label class="flex items-center space-x-2">
            <input type="radio" name="count_type" value="chars" {% if count_type == 'chars' %}checked{% endif %} onchange="updateCount()">
            <span>ƒê·∫øm s·ªë k√Ω t·ª±</span>
        </label>
        <label class="flex items-center space-x-2">
            <input type="radio" name="count_type" value="words" {% if count_type == 'words' %}checked{% endif %} onchange="updateCount()">
            <span>ƒê·∫øm s·ªë ch·ªØ</span>
        </label>
    </div>
</form>
<div id="count_result" class="text-lg font-semibold text-green-700 mt-3">
    {% if count_type == 'chars' %}
        S·ªë k√Ω t·ª±: {{ count }}
    {% else %}
        S·ªë ch·ªØ: {{ count }}
    {% endif %}
</div>
<script>
function updateCount() {
    let text = document.getElementById('input_text').value;
    let countType = document.querySelector('input[name="count_type"]:checked').value;
    let count = 0;
    if(countType === "chars") {
        count = text.length;
        document.getElementById('count_result').innerHTML = "S·ªë k√Ω t·ª±: " + count;
    } else {
        let words = text.replace(/\n/g,' ').split(' ').filter(w => w.trim());
        count = words.length;
        document.getElementById('count_result').innerHTML = "S·ªë ch·ªØ: " + count;
    }
}
window.onload = updateCount;
</script>
{% endblock %}
